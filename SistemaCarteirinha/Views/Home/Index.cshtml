@{
    ViewData["Title"] = "Home Page";
}

<style>
    table {
        width: 80%;
        margin: auto;
        border-collapse: collapse;
    }

    th, td {
        border: 1px solid black;
        padding: 8px;
        text-align: center;
    }
</style>

<div class="text-center">
    <h1 class="display-4">Lista de Clientes</h1>
</div>

<div>
    <a title="Cadastrar PJ" href="/Home/CadastroPJ" class="btn btn-primary">Cadastrar PJ</a>
    <a title="Cadastrar PF" href="/Home/CadastroPF" class="btn btn-primary">Cadastrar PF</a>
</div>

<div style="padding: 40px">
    <table id="tbHeader" class="display" cellspacing="0" width="1000">
        <br />

        <thead>
            <tr>
                <th class="sorting">Cpf</th>
                <th class="sorting">Nome</th>
                <th class="sorting">Cnpj</th>
                <th class="sorting">Razao_social</th>
                <th class="sorting">excluir</th>
            </tr>
        </thead>
    </table>
</div>

@section Scripts {
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>

    <script>
        $(document).ready(function () {
            var url = "@Url.Action("BuscarClientes", "Api")";

            $("#tbHeader").DataTable({
                "pageLength": 10,
                "ajax": {
                    "url": url,
                    "type": "GET",
                    "datatype": "json",
                },
                "columns": [
                    { "data": "Cpf", "autowidth": true },
                    { "data": "Nome", "autowidth": true },
                    { "data": "Cnpj", "autowidth": true },
                    { "data": "Razão Social", "autowidth": true },
                    {
                        "data": "excluir", "autowidth": true, "orderable": false,
                        "render": function (data, type, full) {
                            return '<a class="btn btn-link btn-sm fa fa-trash-o" href="#" onclick="DeletarHeader(' + full.cod_header + ')"></a>';
                        }
                    }
                ],
                "oLanguage": {
                    "sProcessing": "A processar...",
                    "sLengthMenu": "Mostrar _MENU_ registos",
                    "sZeroRecords": "Não foram encontrados resultados",
                    "sInfo": "Mostrando de _START_ até _END_ de _TOTAL_ registos",
                    "sInfoEmpty": "Mostrando de 0 até 0 de 0 registos",
                    "sInfoFiltered": "(filtrado de _MAX_ registos no total)",
                    "sSearch": "Procurar:",
                    "oPaginate": {
                        "sFirst": "Primeiro",
                        "sPrevious": "Anterior",
                        "sNext": "Seguinte",
                        "sLast": "Último"
                    }
                }
            });
        });
    </script>
}

